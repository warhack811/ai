from functools import lru_cache
from pydantic import BaseSettings


class Settings(BaseSettings):
    # Genel uygulama ayarlarÄ±
    APP_NAME: str = "Mami AI"
    DEBUG: bool = True

    API_HOST: str = "0.0.0.0"
    API_PORT: int = 8000

    # Oturum / imzalama iÃ§in gizli anahtar
    SECRET_KEY: str = "super-secret-dev-key-change-this"

    # Groq ayarlarÄ±
    GROQ_API_KEY: str = ""  # .env iÃ§ine eklediÄŸinde gerÃ§ek DECIDER aÃ§Ä±lacak
    GROQ_DECIDER_MODEL: str = "llama-3.3-70b-versatile"

    # INTERNET providers
    BING_API_KEY: str = ""  # Azure Bing Search key
    BING_ENDPOINT: str = "https://api.bing.microsoft.com/v7.0/search"
    
    # Serper (Google Search) ayarlarÄ±
    SERPER_API_KEY: str = ""
    SERPER_ENDPOINT: str = "https://google.serper.dev/search"
    
    # Ollama / Gemma (Bela) ayarlarÄ±
    OLLAMA_BASE_URL: str = "http://127.0.0.1:11434"
    OLLAMA_GEMMA_MODEL: str = "gemma"
    
     # ğŸ”¹ Forge / Flux ayarlarÄ±
    # webui-user.bat ile aÃ§tÄ±ÄŸÄ±n arayÃ¼z genelde http://127.0.0.1:7860 olur
    FORGE_BASE_URL: str = "http://127.0.0.1:7860"
    # Stable Diffusion WebUI Forge txt2img endpoint'i (A1111 ile aynÄ±)
    FORGE_TXT2IMG_PATH: str = "/sdapi/v1/txt2img"
    # Ä°stek zaman aÅŸÄ±mÄ± (saniye)
    FORGE_TIMEOUT: int = 180
    # Kullanmak istediÄŸin Flux checkpoint adÄ± (UI'de seÃ§tiÄŸin isimle eÅŸleÅŸebilir)
    # BoÅŸ bÄ±rakÄ±rsan override_settings gÃ¶nderilmez, Forge'ta seÃ§ili olan model kullanÄ±lÄ±r.
    FORGE_FLUX_CHECKPOINT: str = "flux1-dev-bnb-nf4-v2.safetensors"

    class Config:
        env_file = ".env"
        env_file_encoding = "utf-8"


@lru_cache()
def get_settings() -> Settings:
    return Settings()
